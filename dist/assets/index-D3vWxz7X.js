(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();const S=()=>{const c=document.querySelector("#app"),n=document.createElement("footer"),t=document.createElement("p");t.innerHTML='© 2025 Creado por Clara Manzano Corona | Código abierto en <a href="https://github.com/ClaraDevelope" target="_blank"> GitHub</a> | Eclipso',n.appendChild(t),c.append(n)},q="http://localhost:6262/api/v1",y=async(c,n="GET",t=null,e={})=>{const a=`${q}${c}`,o={"Content-Type":"application/json",...e};t&&(t instanceof FormData?delete o["Content-Type"]:t=JSON.stringify(t));try{const r=await fetch(a,{method:n,headers:o,body:t});if(!r.ok)throw new Error(`Error: ${r.statusText}`);return await r.json()}catch(r){throw console.error("Request failed",r),r}},k=(c,n,t)=>{const e=E=>{(E.type==="blur"||E.key==="Enter")&&c(E.target.value)};let a=!1;const o=()=>{a=!a,h.style.display=a?"flex":"none"};let r=!1;const l=()=>{r=!r,g.style.display=r?"block":"none"},p=E=>{const v=document.getElementById("costValue");v.innerText=E.target.value,n("priceRange",[0,parseInt(E.target.value)])},i=document.createElement("div");i.classList.add("search-filter-container");const d=document.createElement("input");d.type="text",d.classList.add("search-bar"),d.placeholder="Busca eventos...",d.addEventListener("blur",e),d.addEventListener("keypress",e);const s=document.createElement("div");s.classList.add("filters");const m=document.createElement("button");m.classList.add("theme"),m.innerText="Filtra por temática",m.addEventListener("click",o);const h=document.createElement("div");h.classList.add("theme-options"),h.style.display="none",t.forEach(E=>{const v=document.createElement("button");v.classList.add("theme-option"),v.innerText=E,v.addEventListener("click",()=>n("tags",E)),h.appendChild(v)});const u=document.createElement("button");u.classList.add("cost"),u.innerText="Filtra por coste",u.addEventListener("click",l);const g=document.createElement("div");g.classList.add("cost-slider"),g.style.display="none";const f=document.createElement("input");f.type="range",f.min=0,f.max=1e3,f.value=1e3,f.classList.add("slider"),f.addEventListener("input",p);const L=document.createElement("label");return L.innerHTML='Coste: <span id="costValue">1000</span>',g.appendChild(f),g.appendChild(L),i.appendChild(d),s.appendChild(m),s.appendChild(h),s.appendChild(u),s.appendChild(g),i.appendChild(s),i},M=async()=>{const c=document.querySelector("#app");let n=document.querySelector(".page-container");n||(n=document.createElement("div"),n.classList.add("page-container"),c.appendChild(n));let t="",e={tags:"",priceRange:[0,1e3]};const a=async()=>{try{const i=await y("/eventos");if(Array.isArray(i)){const d=new Set;return i.forEach(s=>{s.etiquetas.forEach(m=>d.add(m))}),Array.from(d)}else return console.error("La respuesta no es un array",i),[]}catch(i){return console.error("Error fetching tags:",i),[]}},o=i=>{t=i.trim(),l()},r=(i,d)=>{e[i]=d,l()},l=async()=>{try{const i=new URLSearchParams({search:t,tags:e.tags||"",costMin:e.priceRange[0],costMax:e.priceRange[1]});console.log("Filtros aplicados:",e);const d=await y(`/eventos/filtros?${i.toString()}`);if(Array.isArray(d)){console.log("Eventos recibidos:",d);const s=await a();p(d,s)}else console.error("La respuesta de eventos filtrados no es un array",d)}catch(i){console.error("Error fetching filtered events:",i)}},p=(i,d)=>{const s=document.createElement("div");s.classList.add("events-grid");const m=i.filter(u=>{const g=t?u.titulo.toLowerCase().includes(t.toLowerCase()):!0,f=e.tags?u.etiquetas.includes(e.tags):!0,L=u.precio>=e.priceRange[0]&&u.precio<=e.priceRange[1];return g&&f&&L});console.log("Eventos filtrados:",m),m.length===0?s.innerHTML="<p>No se han encontrado eventos con estos filtros.</p>":m.forEach(u=>{const g=document.createElement("div");g.classList.add("event-card"),g.innerHTML=`
          <h3 class="event-title">${u.titulo}</h3>
          <div class="event-img-container">
            <img src="${u.cartel}" alt="${u.titulo}">
          </div>
          <p class="date">${new Date(u.fecha).toLocaleDateString("es-ES")}</p>
          <p class="description">${u.descripcion}</p>
          <p class="price">${u.precio?`€${u.precio}`:"Gratis"}</p>
        `,s.appendChild(g)}),n.innerHTML="";const h=k(o,r,d);h instanceof Node?(n.appendChild(h),n.appendChild(s)):console.error("El SearchAndFilterComponent no devolvió un nodo válido.")};await a(),l()},A=c=>{const n=document.querySelector(".page-container"),t=document.createElement("section");t.classList.add("faq-section");const e=document.createElement("h2");e.textContent="Preguntas Frecuentes",e.classList.add("faq-title"),t.appendChild(e);const a=document.createElement("div");a.classList.add("faq-grid"),c.forEach(o=>{const r=document.createElement("div");r.classList.add("faq-card");const l=document.createElement("h3");l.textContent=o.question,l.classList.add("faq-question");const p=document.createElement("p");p.textContent=o.answer,p.classList.add("faq-answer"),p.style.display="none",l.addEventListener("click",()=>{const i=p.style.display==="block";p.style.display=i?"none":"block",r.classList.toggle("active",!i)}),r.appendChild(l),r.appendChild(p),a.appendChild(r)}),t.appendChild(a),n.appendChild(t)},N=()=>{const c=document.querySelector(".page-container"),n=document.createElement("div");n.classList.add("testimonial-section");const t=document.createElement("p");t.innerText="Lo que dicen sobre nosotros",t.classList.add("testimonial-subtitle");const e=document.createElement("div");e.classList.add("testimonial-container"),[{avatar:"/avatar1.webp",text:"La organización de los eventos es excepcional, siempre me siento inspirado y conectado con la comunidad.",name:"Carlos Martínez"},{avatar:"/avatar2test.webp",text:"Un espacio donde compartir conocimientos y aprender de otros expertos locales. ¡Es increíble!",name:"Laura Gómez"},{avatar:"/avatar3.webp",text:"Participar en los eventos ha sido una experiencia transformadora. Me encanta formar parte de esta red.",name:"Ana López"}].forEach(({avatar:o,text:r,name:l})=>{const p=document.createElement("div");p.classList.add("testimonial-box");const i=document.createElement("img");i.src=o,i.alt=`${l}'s avatar`,i.classList.add("testimonial-avatar");const d=document.createElement("p");d.innerText=r,d.classList.add("testimonial-text");const s=document.createElement("span");s.innerText=l,s.classList.add("testimonial-name"),p.appendChild(i),p.appendChild(d),p.appendChild(s),e.appendChild(p)}),n.appendChild(t),n.appendChild(e),c.appendChild(n)},P=()=>{const c=document.querySelector(".page-container");if(!c){console.error("No se encontró el contenedor .page-container");return}const n=document.createElement("div");n.classList.add("title-container");const t=document.createElement("h1");t.classList.add("title"),t.innerText="Eclipso",n.append(t),c.appendChild(n)},R=[{question:"¿Dónde se realiza el evento?",answer:"El evento se realiza en el Centro de Convenciones de la Ciudad."},{question:"¿Cuáles son los horarios?",answer:"El evento comienza a las 10:00 AM y finaliza a las 8:00 PM."},{question:"¿Necesito registrarme previamente?",answer:"Sí, puedes registrarte en nuestra página web antes del evento."}],H=()=>{const c=document.getElementById("app");let n=document.querySelector(".page-container");if(!n)n=document.createElement("div"),n.classList.add("page-container"),c.appendChild(n);else{const E=n.querySelector(".grid");E&&(E.innerHTML="")}P();const t=document.createElement("div");t.classList.add("landing-container");const e=document.createElement("div");e.classList.add("grid");const a=document.createElement("div");a.classList.add("box"),a.style.gridColumn="span 2",a.style.gridRow="span 1";const o=document.createElement("p");o.innerHTML="Descubra <strong>eventos cerca de ti</strong> para compartir conocimientos, inspirarse y crecer junto a su comunidad.",a.appendChild(o);const r=document.createElement("div");r.classList.add("box"),r.style.gridColumn="span 2",r.style.gridRow="span 1";const l=document.createElement("p");l.innerHTML="Explore los momentos más destacados de eventos pasados y planifique su participación en los próximos encuentros.",r.appendChild(l);const p=document.createElement("div");p.classList.add("box"),p.style.gridColumn="span 1",p.style.gridRow="span 3";const i=document.createElement("p");i.innerHTML="<strong>¿Tienes una pasión o idea que quieras compartir?</strong> Propon tu evento ideal y lo haremos posible.";const d=document.createElement("button");d.classList.add("contact-button"),d.innerText="Contactanos",p.append(i,d);const s=document.createElement("div");s.classList.add("box"),s.style.gridColumn="span 2",s.style.gridRow="span 3";const m=document.createElement("img");m.src="/movie-night.webp";const h=document.createElement("p");h.innerHTML="Únase a una red vibrante de colaboradores, desde <strong>expertos locales</strong> hasta <strong>líderes de la comunidad.</strong>",s.appendChild(m),s.appendChild(h);const u=document.createElement("div");u.classList.add("box"),u.style.gridColumn="span 1",u.style.gridRow="span 3";const g=document.createElement("img");g.src="/backyard-party-lighting.webp";const f=document.createElement("p");f.innerHTML="<strong>Regístrese ahora</strong> y asegure su lugar en el próximo evento diseñado para inspirar e innovar.";const L=document.createElement("button");L.classList.add("register-landing-button"),L.innerText="Regístrate ahora",L.onclick=()=>{window.location.href="/registro"},u.appendChild(g),u.appendChild(f),u.appendChild(L),e.appendChild(a),e.appendChild(r),e.appendChild(p),e.appendChild(s),e.appendChild(u),t.appendChild(e),n.appendChild(t),N(),A(R)},w=()=>{const c=document.getElementById("app");let n=document.getElementById("skeleton-container");if(!n){n=document.createElement("div"),n.id="skeleton-container",n.classList.add("skeleton-container");for(let t=0;t<5;t++){const e=document.createElement("div");e.classList.add("skeleton-loader"),t===0?(e.classList.add("skeleton-avatar"),e.style.width="50px",e.style.height="50px"):t===1?(e.classList.add("skeleton-image"),e.style.width="100%",e.style.height="200px"):(e.style.width=t%2===0?"80%":"60%",e.style.height="20px"),n.appendChild(e)}c.appendChild(n)}},x=()=>{const c=document.getElementById("skeleton-container");c&&c.remove()},B=c=>{localStorage.setItem("authToken",c)},T=async(c,n)=>{try{const t=document.querySelector(".login-container");t&&t.remove();const e=document.querySelector(".register-container"),a=document.querySelector(".login-text");e&&a&&(e.remove(),a.remove()),w(),setTimeout(async()=>{const o=await y("/auth/login","POST",{email:c,password:n});o.token&&(B(o.token),console.log("Token de inicio de sesión:",o.token),window.location.hash="/landing",window.location.reload())},2e3)}catch(t){console.error("Error al iniciar sesión:",t)}finally{setTimeout(()=>{x()},2e3)}},I=()=>{const c=document.querySelector(".page-container");c.innerHTML="";const n=document.createElement("div");n.classList.add("login-container"),c.append(n);const t=document.createElement("h2");t.classList.add("login-title"),t.innerText="Inicia sesión";const e=document.createElement("form");e.classList.add("login-form");const a=document.createElement("input");a.classList.add("email-input"),a.setAttribute("type","email"),a.setAttribute("placeholder","Correo electrónico");const o=document.createElement("input");o.classList.add("password-input"),o.setAttribute("type","password"),o.setAttribute("placeholder","Contraseña");const r=document.createElement("button");r.classList.add("login-button"),r.innerText="Iniciar sesión";const l=document.createElement("p");l.classList.add("register-text"),l.innerHTML='¿No tienes cuenta? <a href="/registro" class="register-link">Regístrate aquí</a>',r.addEventListener("click",p=>{p.preventDefault();const i=a.value,d=o.value;T(i,d)}),e.append(a,o,r,l),n.append(t,e)},F=async(c,n,t,e,a)=>{try{const o=await y("/auth/register","POST",{userName:c,email:n,password:t,phone:e,birthdate:a});o&&(T(n,t),console.log(o))}catch(o){console.error("Error al iniciar sesión:",o)}},D=()=>{const c=document.querySelector(".page-container");c.innerHTML="";const n=document.createElement("p");n.classList.add("login-text"),n.innerHTML='¿Ya tienes cuenta? <a href="/acceder" class="register-link">Entra aquí</a>';const t=document.createElement("div");t.classList.add("register-container"),c.append(t,n);const e=document.createElement("h2");e.classList.add("register-title"),e.innerText="Nueva cuenta",t.append(e);const a=document.createElement("div");a.classList.add("form-slider"),t.append(a);const o=[{inputs:[{type:"text",placeholder:"Nombre completo",className:"name-input",name:"name"}]},{inputs:[{type:"email",placeholder:"Correo electrónico",className:"email-input",name:"email"},{type:"password",placeholder:"Contraseña",className:"password-input",name:"password"},{type:"password",placeholder:"Confirmar contraseña",className:"confirm-password-input",name:"confirmPassword"}]},{inputs:[{type:"tel",placeholder:"Teléfono (opcional)",className:"phone-input",name:"phone"},{type:"date",placeholder:"Fecha de nacimiento",className:"birthdate-input",name:"birthdate"}]}];let r=0,l={};const p=()=>{a.innerHTML="";const i=document.createElement("form");i.classList.add("form-step"),a.append(i),o[r].inputs.forEach(s=>{const m=document.createElement("input");m.type=s.type,m.placeholder=s.placeholder,m.classList.add(s.className),m.setAttribute("name",s.name),l[s.name]&&(m.value=l[s.name]),m.addEventListener("input",h=>{l[s.name]=h.target.value}),i.append(m)});const d=document.createElement("div");if(d.classList.add("form-controls"),r>0){const s=document.createElement("button");s.innerText="Anterior",s.classList.add("prev-button"),s.addEventListener("click",m=>{m.preventDefault(),r--,p()}),d.append(s)}if(r<o.length-1){const s=document.createElement("button");s.innerText="Siguiente",s.classList.add("next-button"),s.addEventListener("click",m=>{m.preventDefault(),r++,p()}),d.append(s)}else{const s=document.createElement("button");s.innerText="Registrar",s.classList.add("submit-button"),s.type="submit",i.append(s),i.addEventListener("submit",m=>{m.preventDefault();const{name:h,email:u,password:g,confirmPassword:f,phone:L,birthdate:E}=l;g!==f?alert("Las contraseñas no coinciden"):F(h,u,g,L,E)}),d.append(s)}i.append(d)};p()},$=()=>{localStorage.removeItem("authToken"),w(),window.location.hash="#landing",window.location.reload(),x()},C=()=>{const c=document.getElementById("app"),n={"/landing":H,"/acceder":I,"/registro":D,"/salir":$,"/explora":M};let t=document.querySelector(".page-container");t||(t=document.createElement("div"),t.classList.add("page-container"),c.appendChild(t)),t.innerHTML="";const e=window.location.pathname,a=n[e];a?a():t.innerHTML="<h1>404 - Página no encontrada</h1>"},O=()=>{window.location.pathname==="/"&&window.history.replaceState({},"","/landing"),window.addEventListener("popstate",C),C()},b=()=>{const c=localStorage.getItem("authToken");return console.log("Token disponible:",c),!!c},z=(c,n)=>{const t=document.getElementById("app"),e=document.createElement("nav");e.classList.add("menu");const a=b()?c:n;b()?e.classList.add("auth"):e.classList.remove("auth"),a.forEach(r=>{const l=document.createElement("a");l.textContent=r,l.href=`/${r.toLowerCase().replace(" ","-")}`,e.appendChild(l),l.textContent==="Acceder"&&l.classList.add("login"),l.addEventListener("click",p=>{p.preventDefault();const i=l.getAttribute("href");window.history.pushState({},"",i),C()})});const o=document.createElement("div");o.classList.add("hamburger"),o.addEventListener("click",()=>{e.classList.toggle("open")}),t.appendChild(o),t.appendChild(e),window.addEventListener("scroll",()=>{window.scrollY>0?(e.classList.add("scrolled"),o.classList.add("scrolled")):(e.classList.remove("scrolled"),o.classList.remove("scrolled"))})},G=["Perfil","Explora","Notificaciones","Mis eventos","Salir"],V=["Explora","Sobre la comunidad","Acceder"],j=()=>{z(G,V),O(),S()};j();
